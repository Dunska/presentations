= Git - Apsitech 2016
Kevin MARCELLIER
:backend: deckjs
:deckjs_transition: horizontal-slide


== Git, c'est quoi ?

[quote]
Git is a free and open source distributed version control system designed to handle everything from small to very large projects with speed and efficiency.

SCM :

- CVS
- Subversion
- Perforce
- ClearCase

== Histoire

- 1991 → 2002 : Le développement de Linux utilise tarball
- 2002 : Passage à BitKeeper (licences offertes à l'OSS).
- Avril 2005 : Fin annoncée de la licence gratuite
- 7 Avril 2005 : Première version de Git
- 18 Mai 2016 : Version 2.8.3

[quote, Linus Torvalds]
I'm an egotistical bastard, and I name all my projects after myself. First 'Linux', now 'git'.

== Décentralisé

- **D**VCS
- **Dé**centralisé

[%step]
--
- Techniquement, pas besoin de serveur
- _(Presque)_ Tout se passe donc en local
- Après un clone, *tout* l'historique du projet est en local et ne nécessite plus aucun accès réseau pour le manipuler
--

[%step]
image::resources/DCVS.png[]


== Les 4 types d'objets

=== Blob

Contenu d'un fichier identifié par un hash

image::resources/object-blob.png[]

=== Tree

Liste de références vers des hashes

image::resources/object-tree.png[]


== Les 4 types d'objets

=== Commit

Référence le hash d'un tree + métadonnées

image::resources/object-commit.png[]

* Identifié par un hash _SHA-1_
* Version courte ≥ 4 caractères possible (si non ambiguë) : `53b8` = ``53b8``9fc7bb117aee396285f9bc6ce913599a6574

=== Tag

Nom donné à un commit + métadonnées

image::resources/object-tag.png[]

== Les commits

image::resources/commit.png[]

[%step]
image::resources/commits.png[]

== Orienté contenu
Des Snapshots, pas des diffs...

image::resources/snapshots-vs-delta.png[]

== On commence ?

[%step]
--
[source, console]
$ git config --global user.name "Kevin Marcellier"
$ git config --global user.email kevin@marcellier.fr
--

[%step]
--
[source, console]
$ mkdir mon-projet-git
$ cd mon-projet-git/
$ git init
Initialized empty Git repository in mon-projet-git/.git/
$ git commit -m "Initial commit" --allow-empty
[master (root-commit) 53b89fc] Initial commit
--

[%step]
--
[source, console]
$ touch monFichier.txt
$ git add monFichier.txt
$ git commit -m "Création d'un premier fichier."
[master 2ce6ac4] Création d'un premier fichier.
0 files changed
create mode 100644 monFichier.txt
--

== Les bases : Le staging et les commits

- git add
- git commit
- git status

image::resources/areas.png[]

_Le fichier .gitignore permet de définir les fichier à ignorer._

=== Quizz

[source]
.What content has been committed for the _theFile_ file? (1) or (2)?
----
echo "Hello world" >> theFile # (1)
git add theFile
echo "Goodbye my friends" > theFile # (2)
git commit -m "done"
----

== Quelques commandes utiles

- git log
-- git log --pretty=oneline
-- git log --pretty=format:"%h - %an, %ar : %s"
-- git log --pretty="%h - %s" --author=gitster --since="2008-10-01" --before="2008-11-01" --no-merges
- git diff
- git reset
-- git reset HEAD monFichier.txt
- git checkout -- <file>
- git fetch [remote-name]
- git tag
-- git tag -l "v1.8.5*"
-- git tag -a v1.4 -m "my version 1.4"
-- git tag -a v1.2 9fceb02


== Les remotes

- git clone
- git remote
-- git remote -v
-- git remote add github https://github.com/dunska/super-projet
- git push
- git pull

== Les branches

- Explication git push origin master
- git checkout
- git fetch

== Le merge / rebase

- amend
[source]
$ git commit -m 'initial commit'
$ git add forgotten_file
$ git commit --amend


- merge/rebase branch

-- git merge
--- git branch --merged
--- git branch --no-merged
--- git branch -d testing / git branch -D testing

-- Conflit
[source]
<<<<<<< HEAD:index.html
<div id="footer">contact : email.support@github.com</div>
=======
<div id="footer">
 please contact us at support@github.com
</div>
>>>>>>> iss53:index.html

- gpr

=== Le fast-forward

Si possible, Git cherche à ne pas créer de _commit de merge_ même si on lui demande un _merge_

image::ressources/ff.png[Fast-forward illustration]

== Les alias

[source]
$ git config --global alias.co checkout
$ git config --global alias.br branch
$ git config --global alias.ci commit
$ git config --global alias.st status
$ git config --global alias.unstage 'reset HEAD --'

== Quelques autres commandes intéressantes

- git _reflog_ : un filet de sécurité qui peut vous sauver la vie

[source,role="console"]
$ git reflog
2ce6ac4 HEAD@{0}: checkout: moving from nouvellebranche to master
07df291 HEAD@{1}: checkout: moving from 07df291f4d7fc93b10f28ae25c04fff67d674f30 to nouvellebranche
07df291 HEAD@{2}: commit: Nouveau commit
53b89fc HEAD@{3}: checkout: moving from master to 53b89fc
2ce6ac4 HEAD@{4}: commit: Création du premier fichier indispensable.
53b89fc HEAD@{5}: commit (initial): Initial commit


== Le rebase interacif



== Le bisect

Recherche d'un commit problématique par dichotomie

== Les IHM

- Ligne de commande (gitk, git gui)
- SourceTree
- SmartGit
- Plugin Eclipse
- Intégration native Atom, SublimeText

== Les repos

- GitHub
- BitBucket

== Les outils

- Gerrit

== Avantages et inconvénients
